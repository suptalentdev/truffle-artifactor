"use strict";function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _get=function(t,e,r){for(var n=!0;n;){var a=t,o=e,i=r;l=c=s=void 0,n=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}var c=Object.getPrototypeOf(a);if(null===c)return void 0;t=c,e=o,r=i,n=!0}},_createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),factory=function(t,e){var r=function(){function e(t){if(_classCallCheck(this,e),!this.constructor.abi)throw new Error("Contract ABI not set. Please inherit Pudding and set static .abi variable with contract abi.");this.contract=t,this.address=t.address,this.web3||(this.web3=e.web3);var r=!0,n=!1,a=void 0;try{for(var o,i=this.constructor.abi[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;"function"==l.type&&(this[l.name]=this.constructor.synchronizeFunction(this.contract[l.name]),this[l.name].call=this.constructor.promisifyFunction(this.contract[l.name].call),this[l.name].sendTransaction=this.constructor.promisifyFunction(this.contract[l.name].sendTransaction),this[l.name].request=this.contract[l.name].request),"event"==l.type&&(this[l.name]=this.contract[l.name])}}catch(s){n=!0,a=s}finally{try{!r&&i["return"]&&i["return"]()}finally{if(n)throw a}}this.allEvents=this.contract.allEvents}return _createClass(e,null,[{key:"new",value:function(){var r=this,n=Array.prototype.slice.call(arguments);if(!this.binary)throw new Error("Contract binary not set. Please override Pudding and set .binary before calling new()");var a=this;return new t(function(t,o){var i=r.web3.eth.contract(r.abi),l={};r.is_object(n[n.length-1])&&(l=n.pop()),l=r.merge(e.class_defaults,r.class_defaults,l),null==l.data&&(l.data=r.binary);var s=function(e,r){return null!=e?void o(e):void(null==e&&null!=r&&null!=r.address&&t(new a(r)))};n.push(l,s),i["new"].apply(i,n)})}},{key:"at",value:function(t){var e=this.web3.eth.contract(this.abi),r=e.at(t);return new this(r)}},{key:"deployed",value:function(){if(!this.address)throw new Error("Contract address not set - deployed() relies on the contract class having a static 'address' value; please set that before using deployed().");return this.at(this.address)}},{key:"extend",value:function(){var t=(Array.prototype.slice.call(arguments),!0),e=!1,r=void 0;try{for(var n,a=arguments[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value,i=!0,l=!1,s=void 0;try{for(var c,u=Object.keys(o)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value,y=o[f];this.prototype[f]=y}}catch(v){l=!0,s=v}finally{try{!i&&u["return"]&&u["return"]()}finally{if(l)throw s}}}}catch(v){e=!0,r=v}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw r}}}},{key:"whisk",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),e}(this);return n.abi=t,n.binary=e,n.class_defaults=r,n}},{key:"defaults",value:function(t){null==this.class_defaults&&(this.class_defaults={});var e=!0,r=!1,n=void 0;try{for(var a,o=Object.keys(t)[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value,l=t[i];this.class_defaults[i]=l}}catch(s){r=!0,n=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw n}}return this.class_defaults}},{key:"setWeb3",value:function(t){this.web3=t}},{key:"is_object",value:function(t){return"object"==typeof t&&!(t instanceof Array)}},{key:"merge",value:function(){var t={},e=Array.prototype.slice.call(arguments),r=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,s=!0,c=!1,u=void 0;try{for(var f,y=Object.keys(l)[Symbol.iterator]();!(s=(f=y.next()).done);s=!0){var v=f.value,h=l[v];t[v]=h}}catch(d){c=!0,u=d}finally{try{!s&&y["return"]&&y["return"]()}finally{if(c)throw u}}}}catch(d){n=!0,a=d}finally{try{!r&&i["return"]&&i["return"]()}finally{if(n)throw a}}return t}},{key:"promisifyFunction",value:function(r){var n=this;return function(){var a=this,o=Array.prototype.slice.call(arguments),i={};return n.is_object(o[o.length-1])&&(i=o.pop()),i=n.merge(e.class_defaults,n.class_defaults,i),new t(function(t,e){var n=function(r,n){null!=r?e(r):t(n)};o.push(i,n),r.apply(a.contract,o)})}}},{key:"synchronizeFunction",value:function(r){var n=this;return function(){var a=this,o=Array.prototype.slice.call(arguments),i={};return n.is_object(o[o.length-1])&&(i=o.pop()),i=n.merge(e.class_defaults,n.class_defaults,i),new t(function(t,e){var l=function(r,a){var o=null,i=240,l=0;if(null!=r)return void e(r);var o,s=function(){n.web3.eth.getTransaction(a,function(r,n){null==r&&(null!=n.blockHash&&(clearInterval(o),t(a)),l>=i&&(clearInterval(o),e(new Error("Transaction "+a+" wasn't processed in "+l+" attempts!"))),l+=1)})};o=setInterval(s,1e3),s()};o.push(i,l),r.apply(a.contract,o)})}}},{key:"load",value:function(t,e){null==e&&(e="undefined"==typeof module?window:global),t instanceof Array||(t=[t]);var r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,s=l(this);e[s.contract_name]=s}}catch(c){n=!0,a=c}finally{try{!r&&i["return"]&&i["return"]()}finally{if(n)throw a}}}}]),e}();return r.class_defaults={},r.version="0.13.3",r};"undefined"!=typeof module?module.exports=factory(require("bluebird")):window.Pudding=factory(Promise);