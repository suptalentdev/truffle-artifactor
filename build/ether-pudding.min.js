"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var _get=function(t,r,e){for(var n=!0;n;){var a=t,o=r,i=e;l=u=s=void 0,n=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var s=l.get;return void 0===s?void 0:s.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;t=u,r=o,e=i,n=!0}},_createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),factory=function(t,r){var e=function(){function r(t){if(_classCallCheck(this,r),!this.constructor.abi)throw new Error("Contract ABI not set. Please inherit Pudding and set static .abi variable with contract abi.");this.contract=t,this.address=t.address,this.web3||(this.web3=r.web3);var e=!0,n=!1,a=void 0;try{for(var o,i=this.constructor.abi[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value;"function"==l.type&&(this[l.name]=this.constructor.synchronizeFunction(this.contract[l.name]),this[l.name].call=this.constructor.promisifyFunction(this.contract[l.name].call),this[l.name].sendTransaction=this.constructor.promisifyFunction(this.contract[l.name].sendTransaction),this[l.name].request=this.contract[l.name].request),"event"==l.type&&(this[l.name]=this.contract[l.name])}}catch(s){n=!0,a=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw a}}this.allEvents=this.contract.allEvents}return _createClass(r,null,[{key:"new",value:function(){var e=this,n=Array.prototype.slice.call(arguments);if(!this.binary)throw new Error("Contract binary not set. Please override Pudding and set .binary before calling new()");var a=this;return new t(function(t,o){var i=e.web3.eth.contract(e.abi),l={};e.is_object(n[n.length-1])&&(l=n.pop()),l=e.merge(r.class_defaults,e.class_defaults,l),null==l.data&&(l.data=e.binary);var s=function(r,e){return null!=r?void o(r):void(null==r&&null!=e&&null!=e.address&&t(new a(e)))};n.push(l,s),i["new"].apply(i,n)})}},{key:"at",value:function(t){var r=this.web3.eth.contract(this.abi),e=r.at(t);return new this(e)}},{key:"deployed",value:function(){if(!this.address)throw new Error("Contract address not set - deployed() relies on the contract class having a static 'address' value; please set that before using deployed().");return this.at(this.address)}},{key:"extend",value:function(){var t=(Array.prototype.slice.call(arguments),!0),r=!1,e=void 0;try{for(var n,a=arguments[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value,i=!0,l=!1,s=void 0;try{for(var u,c=Object.keys(o)[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value,y=o[f];this.prototype[f]=y}}catch(v){l=!0,s=v}finally{try{!i&&c["return"]&&c["return"]()}finally{if(l)throw s}}}}catch(v){r=!0,e=v}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw e}}}},{key:"whisk",value:function(t,r){var e=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=function(t){function r(){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,arguments)}return _inherits(r,t),r}(this);return n.abi=t,n.binary=r,n.class_defaults=e,n}},{key:"defaults",value:function(t){null==this.class_defaults&&(this.class_defaults={});var r=!0,e=!1,n=void 0;try{for(var a,o=Object.keys(t)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var i=a.value,l=t[i];this.class_defaults[i]=l}}catch(s){e=!0,n=s}finally{try{!r&&o["return"]&&o["return"]()}finally{if(e)throw n}}return this.class_defaults}},{key:"setWeb3",value:function(t){this.web3=t}},{key:"is_object",value:function(t){return"object"==typeof t&&!(t instanceof Array)}},{key:"merge",value:function(){var t={},r=Array.prototype.slice.call(arguments),e=!0,n=!1,a=void 0;try{for(var o,i=r[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value,s=!0,u=!1,c=void 0;try{for(var f,y=Object.keys(l)[Symbol.iterator]();!(s=(f=y.next()).done);s=!0){var v=f.value,h=l[v];t[v]=h}}catch(d){u=!0,c=d}finally{try{!s&&y["return"]&&y["return"]()}finally{if(u)throw c}}}}catch(d){n=!0,a=d}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw a}}return t}},{key:"promisifyFunction",value:function(e){var n=this;return function(){var a=this,o=Array.prototype.slice.call(arguments),i={};return n.is_object(o[o.length-1])&&(i=o.pop()),i=n.merge(r.class_defaults,n.class_defaults,i),new t(function(t,r){var n=function(e,n){null!=e?r(e):t(n)};o.push(i,n),e.apply(a.contract,o)})}}},{key:"synchronizeFunction",value:function(e){var n=this;return function(){var a=Array.prototype.slice.call(arguments),o={};return n.is_object(a[a.length-1])&&(o=a.pop()),o=n.merge(r.class_defaults,n.class_defaults,o),new t(function(t,r){var i=function(e,a){var o=null,i=240,l=0;if(null!=e)return void r(e);var o,s=function(){n.web3.eth.getTransaction(a,function(e,n){null==e&&(null!=n.blockHash&&(clearInterval(o),t(a)),l>=i&&(clearInterval(o),r(new Error("Transaction "+a+" wasn't processed in "+l+" attempts!"))),l+=1)})};o=setInterval(s,1e3),s()};a.push(o,i),e.apply(void 0,_toConsumableArray(a))})}}},{key:"load",value:function(t,r){null==r&&(r="undefined"==typeof module?window:global),t instanceof Array||(t=[t]);var e=[],n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=s(this);e.push(u.contract_name),r[u.contract_name]=u}}catch(c){a=!0,o=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw o}}return e}}]),r}();return e.class_defaults={},e.version="0.13.3",e};"undefined"!=typeof module?module.exports=factory(require("bluebird")):window.Pudding=factory(Promise);