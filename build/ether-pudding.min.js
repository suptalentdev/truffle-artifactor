(function(){var n;n=function(n,t){var e;return e=function(){function e(){}return e.global_defaults={},e.whisk=function(e,r,u){var l,o;return"object"==typeof r&&(u=r,l=null),o=t.eth.contract(e),o.binary=r,o=this.add_helpers(o),o=this.inject_defaults(o,u),o=this.synchronize_contract(o),o=this.make_nicer_new(o,r),null!=n&&(o=this.promisify_contract(o)),o},e.defaults=function(n){var t,r;null==n&&(n={});for(t in n)r=n[t],e.global_defaults[t]=r;return e.global_defaults},e.merge=function(){var n,t,e,r,u,l;for(r={},n=0,e=arguments.length;e>n;n++){u=arguments[n];for(t in u)l=u[t],r[t]=l}return r},e.extend=function(){var n,t,e,r,u,l,o;for(n=Array.prototype.slice.call(arguments),u=n.shift(),t=0,r=arguments.length;r>t;t++){l=arguments[t];for(e in l)o=l[e],u[e]=o}return u},e.is_object=function(n){return"object"==typeof n&&!(n instanceof Array)},e.apply_extensions=function(n,t){return this.extend(t,n._extended),t},e.add_helpers=function(n){var t,r;return n._extended={},n.extend=function(){var t;return t=Array.prototype.slice.call(arguments),t.unshift(n._extended),e.extend.apply(null,t)},t=n.at,r=n["new"],n.at=function(r){var u;return u=t.call(n,r),e.apply_extensions(n,u)},n},e.inject_defaults=function(n,t){var r,u,l;return u=n.at,l=n["new"],r=function(r){return function(u,l){var o,i,a,c,s,f,p,d,_;for(null==l&&(l={}),p=r.merge(t,l),d=n.abi,c=0,f=d.length;f>c;c++)if(o=d[c],a=o.name,i=u[a],null!=i){u[a]=e.inject_defaults_into_function(u,i,p);for(s in i)_=i[s],u[a][s]=_;u[a].sendTransaction=e.inject_defaults_into_function(u,i.sendTransaction,p),u[a].call=e.inject_defaults_into_function(u,i.call,p)}return u}}(this),n.at=function(t,e){var l;return null==e&&(e={}),l=u.call(n,t),r(l,e)},n["new"]=function(u){return function(){var o,i,a,c;return o=Array.prototype.slice.call(arguments),i=o.pop(),u.is_object(o[o.length-1])&&u.is_object(o[o.length-2])?(a=o.pop(),c=o.pop()):(a={},c="object"===o[o.length-1]?o.pop():{}),c=u.merge(e.global_defaults,t,c),o.push(c,function(n,t){return null!=n?void i(n):i(null,r(t))}),l.apply(n,o)}}(this),n},e.inject_defaults_into_function=function(n,t,r){return function(u){return function(){var l,o,i,a;return l=Array.prototype.slice.call(arguments),o=l.pop(),a=u.merge(e.global_defaults,r),u.is_object(l[l.length-1])&&(i=l.pop(),a=u.merge(a,i)),l.push(a,o),t.apply(n,l)}}(this)},e.promisify_contract=function(t){var e,r,u;return e=t.at,r=t["new"],u=function(e){var r,u,l,o,i,a,c,s;for(c=t.abi,u=0,a=c.length;a>u;u++)if(l=c[u],"function"===l.type){i=l.name,r=e[i];for(o in r)s=r[o],("object"==typeof r||"function"==typeof r)&&"request"!==o&&"estimateGas"!==o&&(r[o]=n.promisify(s,e));e[i]=n.promisify(r,e)}return e},t.at=function(n,r){var l;return null==r&&(r={}),l=e.call(t,n,r),u(l)},t["new"]=n.promisify(function(){var n,e;return n=Array.prototype.slice.call(arguments),e=n.pop(),n.push(function(n,t){return null!=n&&e(n),e(null,u(t))}),r.apply(t,n)}),t},e.make_nicer_new=function(n,t){var r;return null==t&&(t=""),r=n["new"],n["new"]=function(u){return function(){var l,o,i,a,c;return l=Array.prototype.slice.call(arguments),o=l.pop(),u.is_object(l[l.length-1])&&u.is_object(l[l.length-2])?(i=l.pop(),c=l.pop()):(i={},c=u.is_object(l[l.length-1])?l.pop():{}),null==c.data&&(c.data=t),a=function(t,r){return null!=t&&o(t,r),null==t&&null!=r&&null!=r.address?(r=e.apply_extensions(n,r),o(null,r)):void 0},l.push(c,i,a),r.apply(n,l)}}(this),n},e.synchronize_function=function(n,e){var r,u,l;return u=null,l=240,r=0,function(){var o,i,a;return o=Array.prototype.slice.call(arguments),i=o.pop(),a=function(n,e){var o,a;return null!=n?void i(n,e):(a=e,u=null,o=function(){return t.eth.getTransaction(a,function(n,t){return null==n?(null!=t.blockHash&&(clearInterval(u),i(null,a)),r>=l&&(clearInterval(u),i("Transaction "+a+" wasn't processed in "+r+" attempts!",a)),r+=1):void 0})},u=setInterval(o,1e3),o())},o.push(a),e.apply(n,o)}},e.synchronize_contract=function(n){var t,r,u;return t=n.at,r=n["new"],u=function(t){var r,u,l,o,i,a,c,s;for(c=n.abi,o=0,a=c.length;a>o;o++)if(r=c[o],l=r.name,u=t[l],null!=u){t[l]=e.synchronize_function(t,u);for(i in u)s=u[i],t[l][i]=s}return t},n.at=function(e,r){var l;return null==r&&(r={}),l=t.call(n,e,r),u(l)},n["new"]=function(){var t,e;return t=Array.prototype.slice.call(arguments),e=t.pop(),t.push(function(n,t){return null!=n?void e(n):e(null,u(t))}),r.apply(n,t)},n},e}()},"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=n(require("bluebird"),web3||require("web3")):window.Pudding=n(Promise,web3)}).call(this);